// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema


// https://docs.nestjs.com/recipes/prisma
//Note that during installation, Prisma automatically invokes the prisma generate command for you. In the future, you need to run this command after every change to your Prisma models to update your generated Prisma Client.

//Note The prisma generate command reads your Prisma schema and updates the generated Prisma Client library inside node_modules/@prisma/client. 

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Employee {
  id    Int     @default(autoincrement()) @id
  name  String
  is_active Boolean @default(true)
  committees Membership[]
}

model Committee {
  id    Int     @default(autoincrement()) @id
  bond  String //Vínculo 
  name  String //Órgão
  begin_date DateTime?
  end_date DateTime?
  ordinance String? //Portaria 
  observations String?
  is_active Boolean @default(true)
  is_singleton Boolean @default(true)
  members Membership[]
}

model Membership {
  employee Employee @relation(fields: [employee_id], references: [id])
  employee_id Int // relation scalar field (used in the `@relation` attribute above) @map("member_id")
  committee Committee @relation(fields: [committee_id], references: [id])
  committee_id Int // relation scalar field (used in the `@relation` attribute above)
  role  String? @default("Membro") //Cargo
  begin_date DateTime? @default(now())
  term Int? @default(1) //Ordem do mandato
  observations String?
  is_active Boolean @default(true)

  @@id([employee_id, committee_id])
	@@map("MembersOnCommittees")
}